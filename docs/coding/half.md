# äºŒåˆ†

- æœ‰å•è°ƒæ€§ï¼Œåˆ™å¿…ç„¶å¯ä»¥äºŒåˆ†ï¼›å¯ä»¥äºŒåˆ†ï¼Œä¸ä»£è¡¨æœ‰å•è°ƒæ€§ã€‚
- äºŒåˆ†çš„æ„æ€æ˜¯ï¼Œåœ¨ä¸€ä¸ªåŒºé—´å†…ï¼Œå­˜åœ¨æŸä¸€ç‚¹ï¼Œä½¿å¾—æŸç§æ€§è´¨å¯¹äºè¿™ä¸ªç‚¹å³è¾¹çš„åŒºåŸŸæ˜¯æ»¡è¶³çš„ï¼Œä½†æ˜¯è¿™ä¸ªç‚¹å³è¾¹çš„åŒºåŸŸæ˜¯ä¸æ»¡è¶³çš„ã€‚
- åªè¦æ»¡è¶³è¿™ç§â€œåŒºé—´ä¸­æœ‰ä¸€ä¸ªåˆ†ç•Œç‚¹ï¼Œå·¦è¾¹éƒ½ä¸æ»¡è¶³ï¼Œå³è¾¹éƒ½æ»¡è¶³â€çš„æƒ…å†µï¼Œå°±å¯ä»¥ä½¿ç”¨äºŒåˆ†ï¼ŒæŠŠè¿™ä¸ªåˆ†ç•Œç‚¹æ‰¾å‡ºæ¥ã€‚

## æ•´æ•°äºŒåˆ†

#### æ€æƒ³

- å¦‚æœæ˜¯æ•´æ•°äºŒåˆ†ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªåŒºé—´ç”šè‡³ä¸ä¼šè¿æ¥ã€‚
- äºæ˜¯ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾å‡ºå·¦è¾¹é‚£ä¸ªåŒºé—´çš„å³è¾¹ç•Œï¼Œæˆ–æ˜¯æ‰¾å‡ºå³è¾¹åŒºé—´çš„å·¦è¾¹ç•Œï¼Œéƒ½æ˜¯æ­£ç¡®çš„ç­”æ¡ˆã€‚
- å¯¹äºè¿™ç§äºŒåˆ†ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§ä¸åŒçš„æ¨¡æ¿ã€‚ä¹Ÿå°±æ˜¯æ ¹æ®æ˜¯æ‰¾çš„å·¦åŒºé—´å³è¾¹ç•Œè¿˜æ˜¯å³åŒºé—´å·¦è¾¹ç•Œæ¥åˆ¤æ–­ã€‚
- äºŒåˆ†çš„æ€§è´¨ï¼šæ¯è½®è¿­ä»£ï¼Œæ‰€åœ¨çš„åŒºé—´å†…ä¸€å®šåŒ…å«äº†æ­£ç¡®ç­”æ¡ˆã€‚æ‰€ä»¥æ˜¯ä¸€ä¸ªä¸æ–­ç¼©å°èŒƒå›´çš„è¿‡ç¨‹ã€‚è¿™ç§ç¼©å°çš„è¿‡ç¨‹æ˜¯logçš„ã€‚



#### lower_boundå’Œupper_boundé—®é¢˜

- å¯¹åº”C++åº“å‡½æ•°ä¸­çš„è¿™ä¸¤ä¸ªå‡½æ•°ã€‚åˆ†åˆ«çš„æ„æ€æ˜¯ï¼šç”¨æ•´æ•°äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•ï¼Œåœ¨å•è°ƒæ€§æ•°ç»„ä¸­ï¼Œæ‰¾å‡ºç¬¬ä¸€ä¸ª>=æŸä¸ªæ•°çš„ä½ç½®ï¼Œæœ€åä¸€ä¸ª<=æŸä¸ªæ•°çš„ä½ç½®ã€‚



#### æ¨¡æ¿

- lå’Œrï¼Œä¸ç®¡æ˜¯lowerè¿˜æ˜¯upperï¼Œå…¶åˆå§‹åŒ–çš„æ–¹æ³•éƒ½æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œwhileå¾ªç¯çš„æ¡ä»¶ä¹Ÿæ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œifåé¢çš„èµ‹å€¼læˆ–r=midä¹Ÿæ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚
- ä¸¤ç§æ¨¡æ¿çš„åŒºåˆ«æ˜¯ï¼šmidçš„åˆå§‹åŒ–å€¼ä¸ä¸€æ ·ï¼Œä»¥åŠelseåçš„èµ‹å€¼ä¸ä¸€æ ·ï¼Œifæ¡ä»¶ä¸ä¸€æ ·ï¼Œå…¶ä»–æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚
- å¦‚æœæ˜¯loweræ¨¡æ¿ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯åå‘è®©ç­”æ¡ˆå­˜åœ¨çš„åŒºé—´å¾€å·¦è¾¹èµ°ï¼Œæ‰€ä»¥ä¼šå»è®©r=mid,å¹¶ä¸”ifçš„å†™æ³•æ˜¯`x<=q[mid]`(è¿™æ ·æ‰èƒ½ä¿è¯ç­”æ¡ˆåŒºé—´å¾€å·¦è¾¹ç§»åŠ¨)ï¼›å¦‚æœæ˜¯upperæ¨¡æ¿ï¼Œè‚¯å®šå€¾å‘äºè®©ç­”æ¡ˆå­˜åœ¨çš„åŒºé—´å¾€å³è¾¹èµ°ï¼Œä¹Ÿå°±æ˜¯è®©l=midï¼Œifå†™æ³•åŒç†ã€‚
- if-elseçš„å¯¹ç§°æ€§ï¼šå¦‚æœifåæ˜¯lï¼Œé‚£ä¹ˆelseåå°±æ˜¯rã€‚åä¹‹åŒç†ã€‚
- æœ€åéƒ½`return l`å³å¯ã€‚
- æ³¨æ„ï¼Œmidæ˜¯åœ¨whileä¸­è¢«ç¡®å®šçš„ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹åˆå§‹åŒ–æ¥çš„ã€‚
- æ³¨æ„ï¼Œä¸¤ä¸ªifçš„æ¡ä»¶éƒ½å¸¦ç­‰å·ã€‚
- æ³¨æ„ï¼Œç¡®å®šmidçš„æ—¶å€™å¯ä»¥å…ˆç²—æš´åœ°å†™`l+r>>1`ï¼Œåˆ°åé¢å†åˆ¤æ–­ã€‚å¦‚æœræ˜¯midï¼Œåˆ™læ˜¯mid+1`l+r>>1`ï¼Œmidæ˜¯ï¼›å¦åˆ™å¦‚æœlæ˜¯midï¼Œé‚£ä¹ˆræ˜¯mid-1,midæ˜¯`l+r+1>>1`ï¼›

```c++
//q:æŸ¥è¯¢æ•°ç»„ï¼Œxï¼šæŸ¥è¯¢ç›®æ ‡ï¼Œnï¼šæ•°ç»„é•¿åº¦
int lower_bound(int* q,int x,int n){
    int l=0,r=n-1;
    while(l<r){
        int mid=l+r>>1;
        if(q[mid]>=x)r=mid;
        else l=mid+1;
    }
    return l;
}
```

```c++
//q:æŸ¥è¯¢æ•°ç»„ï¼Œxï¼šæŸ¥è¯¢ç›®æ ‡ï¼Œnï¼šæ•°ç»„é•¿åº¦
int upper_bound(int* q,int x,int n){
    int l=0,r=n-1;
    while(l<r){
        int mid=l+r+1>>1;
        if(q[mid]<=x)l=mid;
        else r=mid-1;
    }
    return l;
}
```



#### ç»ƒä¹ 

[Start ğŸ•¹](https://www.acwing.com/problem/content/791/){: .md-button }

```c++
#include <bits/stdc++.h>
using namespace std;

const int N=100010;

int q[N];

//q:æŸ¥è¯¢æ•°ç»„ï¼Œxï¼šæŸ¥è¯¢ç›®æ ‡ï¼Œnï¼šæ•°ç»„é•¿åº¦
int lower_bound(int* q,int x,int n){
    //TODO
}

//q:æŸ¥è¯¢æ•°ç»„ï¼Œxï¼šæŸ¥è¯¢ç›®æ ‡ï¼Œnï¼šæ•°ç»„é•¿åº¦
int upper_bound(int* q,int x,int n){
	//TODO
}

int main(){
    // freopen("a.in","r",stdin);
	// freopen("a.out", "w", stdout);
    int n,m;
    cin>>n>>m;
    for(int i=0;i<=n-1;i++)cin>>q[i];

    while(m--){
        int x;
        cin>>x;
        int ind=lower_bound(q,x,n);
        if(q[ind]!=x)cout<<-1<<' '<<-1<<endl;
        else {
            cout<<ind<<' ';
            ind=upper_bound(q,x,n);
            cout<<ind<<endl;
        }
    }
}
```



## æµ®ç‚¹äºŒåˆ†

#### æ€æƒ³

- æµ®ç‚¹äºŒåˆ†å’Œæ•´æ•°äºŒåˆ†çš„åŒºåˆ«æ˜¯ï¼šä¸éœ€è¦åŒºåˆ†ä¸¤ç§æ¨¡æ¿çš„æƒ…å†µã€‚å®ƒæ€ä¹ˆå†™éƒ½æ˜¯å¯¹çš„ï¼Œæ²¡æœ‰è¾¹ç•Œé—®é¢˜ã€‚
- ç»“æŸæ¡ä»¶é‡‡ç”¨lå’Œrä¹‹é—´çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯epsï¼Œæ¥å†³å®šã€‚
- æˆ–è€…ä¹Ÿå¯ä»¥æ›´åŠ ç²—æš´ï¼Œç›´æ¥forå¾ªç¯è‹¥å¹²æ¬¡ã€‚å¾ˆå¤šé¢˜åªè¦å¾ªç¯100æ¬¡å°±èƒ½å¾—åˆ°ç­”æ¡ˆï¼Œè€Œä¸”æ˜¾ç„¶ä¸ä¼šTLEã€‚å› ä¸ºå¾ªç¯næ¬¡ï¼Œå°±æ˜¯è®©åŒºé—´é•¿åº¦å˜æˆ2çš„-næ¬¡æ–¹ã€‚è¿™æ ·å°±èƒ½çœ‹å‡ºæ˜¯å¦èƒ½æ»¡è¶³ç²¾åº¦è¦æ±‚äº†ã€‚
- ä¸€èˆ¬æƒ…å†µï¼Œepsè¦æ¯”ä¿ç•™çš„å°æ•°ä½æ•°å¤š2ä¸ªæ¬¡æ–¹ï¼Œä¾‹å¦‚å¦‚æœä¿ç•™6ä½å°æ•°ï¼Œé‚£å°±æ˜¯epsè¦åˆ°10çš„è´Ÿ8.

